{"ast":null,"code":"import React,{useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import{Link}from'react-router-dom';import{FaUser,FaFileAlt,FaCrown}from'react-icons/fa';import{getContents}from'../features/content/contentSlice';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{var _subscription$daysRem;const dispatch=useDispatch();const{user}=useSelector(state=>state.auth);const{contents}=useSelector(state=>state.content);useEffect(()=>{if(user){dispatch(getContents({limit:5}));}},[user,dispatch]);if(!user){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading user data...\"});}// Destructure with default values to prevent errors\nconst{name,avatar,subscription={currentPlan:'free',daysRemaining:null},usageCount=0,usageLimit=10,usagePercentage=0}=user;// Ensure subscription has required properties\nconst currentPlan=(subscription===null||subscription===void 0?void 0:subscription.currentPlan)||'free';const daysRemaining=(_subscription$daysRem=subscription===null||subscription===void 0?void 0:subscription.daysRemaining)!==null&&_subscription$daysRem!==void 0?_subscription$daysRem:null;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-6\",children:[/*#__PURE__*/_jsx(\"img\",{src:avatar,alt:name,className:\"w-16 h-16 rounded-full mr-4 border-2 border-primary-300\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-800\",children:name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mt-1\",children:[/*#__PURE__*/_jsxs(\"span\",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-medium ${currentPlan==='free'?'bg-gray-100 text-gray-800':currentPlan==='basic'?'bg-primary-100 text-primary-800':'bg-secondary-100 text-secondary-800'}`,children:[/*#__PURE__*/_jsx(FaCrown,{className:\"mr-1\"}),currentPlan.charAt(0).toUpperCase()+currentPlan.slice(1),\" Plan\"]}),daysRemaining!==null&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-500\",children:[daysRemaining,\" days remaining\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mb-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-gray-700\",children:[\"Usage (\",usageCount,\"/\",usageLimit,\")\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-gray-700\",children:[usagePercentage,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2.5\",children:/*#__PURE__*/_jsx(\"div\",{className:`h-2.5 rounded-full ${usagePercentage<70?'bg-green-500':usagePercentage<90?'bg-yellow-500':'bg-red-500'}`,style:{width:`${usagePercentage}%`}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800\",children:\"Recent Content\"}),/*#__PURE__*/_jsx(Link,{to:\"/content\",className:\"text-sm text-primary-600 hover:text-primary-800\",children:\"View All\"})]}),!contents||contents.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-center py-4\",children:\"No content yet. Start generating!\"}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:contents.slice(0,5).map(content=>/*#__PURE__*/_jsx(Link,{to:`/content/${content._id}`,className:\"block p-3 bg-gray-50 rounded-lg hover:bg-gray-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(FaFileAlt,{className:\"text-gray-400 mr-3 mt-1\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-800 line-clamp-1\",children:content.prompt}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500 capitalize\",children:content.contentType}),/*#__PURE__*/_jsx(\"span\",{className:\"mx-2 text-gray-300\",children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:new Date(content.createdAt).toLocaleDateString()})]})]})]})},content._id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4\",children:[/*#__PURE__*/_jsx(Link,{to:\"/generator\",className:\"flex-1 bg-primary-600 text-white text-center py-2 px-4 rounded-lg hover:bg-primary-700 transition-colors\",children:\"Generate Content\"}),/*#__PURE__*/_jsx(Link,{to:\"/subscription\",className:\"flex-1 bg-white text-primary-600 text-center py-2 px-4 rounded-lg border border-primary-600 hover:bg-primary-50 transition-colors\",children:\"Manage Subscription\"})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useEffect","useSelector","useDispatch","Link","FaUser","FaFileAlt","FaCrown","getContents","jsx","_jsx","jsxs","_jsxs","Dashboard","_subscription$daysRem","dispatch","user","state","auth","contents","content","limit","children","name","avatar","subscription","currentPlan","daysRemaining","usageCount","usageLimit","usagePercentage","className","src","alt","charAt","toUpperCase","slice","style","width","to","length","map","_id","prompt","contentType","Date","createdAt","toLocaleDateString"],"sources":["C:/Users/harsh/Desktop/Ai-content generator/frontend/src/components/Dashboard.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { FaUser, FaFileAlt, FaCrown } from 'react-icons/fa';\nimport { getContents } from '../features/content/contentSlice';\n\nconst Dashboard = () => {\n  const dispatch = useDispatch();\n  const { user } = useSelector((state) => state.auth);\n  const { contents } = useSelector((state) => state.content);\n\n  useEffect(() => {\n    if (user) {\n      dispatch(getContents({ limit: 5 }));\n    }\n  }, [user, dispatch]);\n\n  if (!user) {\n    return <div>Loading user data...</div>;\n  }\n\n  // Destructure with default values to prevent errors\n  const { \n    name, \n    avatar, \n    subscription = { currentPlan: 'free', daysRemaining: null }, \n    usageCount = 0, \n    usageLimit = 10, \n    usagePercentage = 0 \n  } = user;\n\n  // Ensure subscription has required properties\n  const currentPlan = subscription?.currentPlan || 'free';\n  const daysRemaining = subscription?.daysRemaining ?? null;\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-md p-6\">\n      <div className=\"flex items-center mb-6\">\n        <img\n          src={avatar}\n          alt={name}\n          className=\"w-16 h-16 rounded-full mr-4 border-2 border-primary-300\"\n        />\n        <div>\n          <h2 className=\"text-2xl font-semibold text-gray-800\">{name}</h2>\n          <div className=\"flex items-center gap-2 mt-1\">\n            <span\n              className={`inline-flex items-center rounded-full px-3 py-1 text-xs font-medium ${\n                currentPlan === 'free'\n                  ? 'bg-gray-100 text-gray-800'\n                  : currentPlan === 'basic'\n                  ? 'bg-primary-100 text-primary-800'\n                  : 'bg-secondary-100 text-secondary-800'\n              }`}\n            >\n              <FaCrown className=\"mr-1\" />\n              {currentPlan.charAt(0).toUpperCase() + currentPlan.slice(1)} Plan\n            </span>\n            {daysRemaining !== null && (\n              <span className=\"text-sm text-gray-500\">\n                {daysRemaining} days remaining\n              </span>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"mb-6\">\n        <div className=\"flex justify-between mb-2\">\n          <span className=\"text-sm font-medium text-gray-700\">\n            Usage ({usageCount}/{usageLimit})\n          </span>\n          <span className=\"text-sm font-medium text-gray-700\">{usagePercentage}%</span>\n        </div>\n        <div className=\"w-full bg-gray-200 rounded-full h-2.5\">\n          <div\n            className={`h-2.5 rounded-full ${\n              usagePercentage < 70\n                ? 'bg-green-500'\n                : usagePercentage < 90\n                ? 'bg-yellow-500'\n                : 'bg-red-500'\n            }`}\n            style={{ width: `${usagePercentage}%` }}\n          ></div>\n        </div>\n      </div>\n\n      <div className=\"mb-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold text-gray-800\">Recent Content</h3>\n          <Link to=\"/content\" className=\"text-sm text-primary-600 hover:text-primary-800\">\n            View All\n          </Link>\n        </div>\n        {!contents || contents.length === 0 ? (\n          <div className=\"text-gray-500 text-center py-4\">\n            No content yet. Start generating!\n          </div>\n        ) : (\n          <div className=\"space-y-3\">\n            {contents.slice(0, 5).map((content) => (\n              <Link\n                to={`/content/${content._id}`}\n                key={content._id}\n                className=\"block p-3 bg-gray-50 rounded-lg hover:bg-gray-100\"\n              >\n                <div className=\"flex items-start\">\n                  <FaFileAlt className=\"text-gray-400 mr-3 mt-1\" />\n                  <div>\n                    <p className=\"font-medium text-gray-800 line-clamp-1\">\n                      {content.prompt}\n                    </p>\n                    <div className=\"flex items-center mt-1\">\n                      <span className=\"text-xs text-gray-500 capitalize\">\n                        {content.contentType}\n                      </span>\n                      <span className=\"mx-2 text-gray-300\">â€¢</span>\n                      <span className=\"text-xs text-gray-500\">\n                        {new Date(content.createdAt).toLocaleDateString()}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </Link>\n            ))}\n          </div>\n        )}\n      </div>\n\n      <div className=\"flex gap-4\">\n        <Link\n          to=\"/generator\"\n          className=\"flex-1 bg-primary-600 text-white text-center py-2 px-4 rounded-lg hover:bg-primary-700 transition-colors\"\n        >\n          Generate Content\n        </Link>\n        <Link\n          to=\"/subscription\"\n          className=\"flex-1 bg-white text-primary-600 text-center py-2 px-4 rounded-lg border border-primary-600 hover:bg-primary-50 transition-colors\"\n        >\n          Manage Subscription\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nexport default Dashboard; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,MAAM,CAAEC,SAAS,CAAEC,OAAO,KAAQ,gBAAgB,CAC3D,OAASC,WAAW,KAAQ,kCAAkC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/D,KAAM,CAAAC,SAAS,CAAGA,CAAA,GAAM,KAAAC,qBAAA,CACtB,KAAM,CAAAC,QAAQ,CAAGZ,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEa,IAAK,CAAC,CAAGd,WAAW,CAAEe,KAAK,EAAKA,KAAK,CAACC,IAAI,CAAC,CACnD,KAAM,CAAEC,QAAS,CAAC,CAAGjB,WAAW,CAAEe,KAAK,EAAKA,KAAK,CAACG,OAAO,CAAC,CAE1DnB,SAAS,CAAC,IAAM,CACd,GAAIe,IAAI,CAAE,CACRD,QAAQ,CAACP,WAAW,CAAC,CAAEa,KAAK,CAAE,CAAE,CAAC,CAAC,CAAC,CACrC,CACF,CAAC,CAAE,CAACL,IAAI,CAAED,QAAQ,CAAC,CAAC,CAEpB,GAAI,CAACC,IAAI,CAAE,CACT,mBAAON,IAAA,QAAAY,QAAA,CAAK,sBAAoB,CAAK,CAAC,CACxC,CAEA;AACA,KAAM,CACJC,IAAI,CACJC,MAAM,CACNC,YAAY,CAAG,CAAEC,WAAW,CAAE,MAAM,CAAEC,aAAa,CAAE,IAAK,CAAC,CAC3DC,UAAU,CAAG,CAAC,CACdC,UAAU,CAAG,EAAE,CACfC,eAAe,CAAG,CACpB,CAAC,CAAGd,IAAI,CAER;AACA,KAAM,CAAAU,WAAW,CAAG,CAAAD,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAEC,WAAW,GAAI,MAAM,CACvD,KAAM,CAAAC,aAAa,EAAAb,qBAAA,CAAGW,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAEE,aAAa,UAAAb,qBAAA,UAAAA,qBAAA,CAAI,IAAI,CAEzD,mBACEF,KAAA,QAAKmB,SAAS,CAAC,mCAAmC,CAAAT,QAAA,eAChDV,KAAA,QAAKmB,SAAS,CAAC,wBAAwB,CAAAT,QAAA,eACrCZ,IAAA,QACEsB,GAAG,CAAER,MAAO,CACZS,GAAG,CAAEV,IAAK,CACVQ,SAAS,CAAC,yDAAyD,CACpE,CAAC,cACFnB,KAAA,QAAAU,QAAA,eACEZ,IAAA,OAAIqB,SAAS,CAAC,sCAAsC,CAAAT,QAAA,CAAEC,IAAI,CAAK,CAAC,cAChEX,KAAA,QAAKmB,SAAS,CAAC,8BAA8B,CAAAT,QAAA,eAC3CV,KAAA,SACEmB,SAAS,CAAE,uEACTL,WAAW,GAAK,MAAM,CAClB,2BAA2B,CAC3BA,WAAW,GAAK,OAAO,CACvB,iCAAiC,CACjC,qCAAqC,EACxC,CAAAJ,QAAA,eAEHZ,IAAA,CAACH,OAAO,EAACwB,SAAS,CAAC,MAAM,CAAE,CAAC,CAC3BL,WAAW,CAACQ,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAGT,WAAW,CAACU,KAAK,CAAC,CAAC,CAAC,CAAC,OAC9D,EAAM,CAAC,CACNT,aAAa,GAAK,IAAI,eACrBf,KAAA,SAAMmB,SAAS,CAAC,uBAAuB,CAAAT,QAAA,EACpCK,aAAa,CAAC,iBACjB,EAAM,CACP,EACE,CAAC,EACH,CAAC,EACH,CAAC,cAENf,KAAA,QAAKmB,SAAS,CAAC,MAAM,CAAAT,QAAA,eACnBV,KAAA,QAAKmB,SAAS,CAAC,2BAA2B,CAAAT,QAAA,eACxCV,KAAA,SAAMmB,SAAS,CAAC,mCAAmC,CAAAT,QAAA,EAAC,SAC3C,CAACM,UAAU,CAAC,GAAC,CAACC,UAAU,CAAC,GAClC,EAAM,CAAC,cACPjB,KAAA,SAAMmB,SAAS,CAAC,mCAAmC,CAAAT,QAAA,EAAEQ,eAAe,CAAC,GAAC,EAAM,CAAC,EAC1E,CAAC,cACNpB,IAAA,QAAKqB,SAAS,CAAC,uCAAuC,CAAAT,QAAA,cACpDZ,IAAA,QACEqB,SAAS,CAAE,sBACTD,eAAe,CAAG,EAAE,CAChB,cAAc,CACdA,eAAe,CAAG,EAAE,CACpB,eAAe,CACf,YAAY,EACf,CACHO,KAAK,CAAE,CAAEC,KAAK,CAAE,GAAGR,eAAe,GAAI,CAAE,CACpC,CAAC,CACJ,CAAC,EACH,CAAC,cAENlB,KAAA,QAAKmB,SAAS,CAAC,MAAM,CAAAT,QAAA,eACnBV,KAAA,QAAKmB,SAAS,CAAC,wCAAwC,CAAAT,QAAA,eACrDZ,IAAA,OAAIqB,SAAS,CAAC,qCAAqC,CAAAT,QAAA,CAAC,gBAAc,CAAI,CAAC,cACvEZ,IAAA,CAACN,IAAI,EAACmC,EAAE,CAAC,UAAU,CAACR,SAAS,CAAC,iDAAiD,CAAAT,QAAA,CAAC,UAEhF,CAAM,CAAC,EACJ,CAAC,CACL,CAACH,QAAQ,EAAIA,QAAQ,CAACqB,MAAM,GAAK,CAAC,cACjC9B,IAAA,QAAKqB,SAAS,CAAC,gCAAgC,CAAAT,QAAA,CAAC,mCAEhD,CAAK,CAAC,cAENZ,IAAA,QAAKqB,SAAS,CAAC,WAAW,CAAAT,QAAA,CACvBH,QAAQ,CAACiB,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAACK,GAAG,CAAErB,OAAO,eAChCV,IAAA,CAACN,IAAI,EACHmC,EAAE,CAAE,YAAYnB,OAAO,CAACsB,GAAG,EAAG,CAE9BX,SAAS,CAAC,mDAAmD,CAAAT,QAAA,cAE7DV,KAAA,QAAKmB,SAAS,CAAC,kBAAkB,CAAAT,QAAA,eAC/BZ,IAAA,CAACJ,SAAS,EAACyB,SAAS,CAAC,yBAAyB,CAAE,CAAC,cACjDnB,KAAA,QAAAU,QAAA,eACEZ,IAAA,MAAGqB,SAAS,CAAC,wCAAwC,CAAAT,QAAA,CAClDF,OAAO,CAACuB,MAAM,CACd,CAAC,cACJ/B,KAAA,QAAKmB,SAAS,CAAC,wBAAwB,CAAAT,QAAA,eACrCZ,IAAA,SAAMqB,SAAS,CAAC,kCAAkC,CAAAT,QAAA,CAC/CF,OAAO,CAACwB,WAAW,CAChB,CAAC,cACPlC,IAAA,SAAMqB,SAAS,CAAC,oBAAoB,CAAAT,QAAA,CAAC,QAAC,CAAM,CAAC,cAC7CZ,IAAA,SAAMqB,SAAS,CAAC,uBAAuB,CAAAT,QAAA,CACpC,GAAI,CAAAuB,IAAI,CAACzB,OAAO,CAAC0B,SAAS,CAAC,CAACC,kBAAkB,CAAC,CAAC,CAC7C,CAAC,EACJ,CAAC,EACH,CAAC,EACH,CAAC,EAnBD3B,OAAO,CAACsB,GAoBT,CACP,CAAC,CACC,CACN,EACE,CAAC,cAEN9B,KAAA,QAAKmB,SAAS,CAAC,YAAY,CAAAT,QAAA,eACzBZ,IAAA,CAACN,IAAI,EACHmC,EAAE,CAAC,YAAY,CACfR,SAAS,CAAC,0GAA0G,CAAAT,QAAA,CACrH,kBAED,CAAM,CAAC,cACPZ,IAAA,CAACN,IAAI,EACHmC,EAAE,CAAC,eAAe,CAClBR,SAAS,CAAC,mIAAmI,CAAAT,QAAA,CAC9I,qBAED,CAAM,CAAC,EACJ,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAT,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}